
#import <Foundation/Foundation.h>

NSString *StringFromAdministrativeData(Byte *data);


//: mobilecode
Byte str_tanEconomistValue[] = {37, 10, 53, 4, 162, 164, 151, 158, 161, 154, 152, 164, 153, 154, 205};


//: mobile
Byte str_conservationTitle[] = {96, 6, 14, 13, 1, 69, 168, 188, 36, 112, 131, 247, 40, 123, 125, 112, 119, 122, 115, 145};


//: invitecode
Byte str_readilyCameraName[] = {34, 10, 20, 10, 198, 195, 240, 58, 253, 228, 125, 130, 138, 125, 136, 121, 119, 131, 120, 121, 3};


//: /user/register
Byte str_luckySweetContent[] = {8, 14, 67, 10, 244, 28, 127, 136, 131, 78, 114, 184, 182, 168, 181, 114, 181, 168, 170, 172, 182, 183, 168, 181, 217};


//: register_avtivity3_register_fail
Byte str_imageFessTanName[] = {33, 32, 37, 14, 194, 138, 227, 253, 203, 118, 204, 142, 117, 243, 151, 138, 140, 142, 152, 153, 138, 151, 132, 134, 155, 153, 142, 155, 142, 153, 158, 88, 132, 151, 138, 140, 142, 152, 153, 138, 151, 132, 139, 134, 142, 145, 202};


//: answer
Byte str_sweetText[] = {15, 6, 71, 10, 107, 183, 178, 35, 191, 22, 168, 181, 186, 190, 172, 185, 122};


//: /validate/check_username_available
Byte str_gestureImageName[] = {62, 34, 83, 5, 87, 130, 201, 180, 191, 188, 183, 180, 199, 184, 130, 182, 187, 184, 182, 190, 178, 200, 198, 184, 197, 193, 180, 192, 184, 178, 180, 201, 180, 188, 191, 180, 181, 191, 184, 38};


//: RegistFinshNotification
Byte str_revEncounterTitle[] = {85, 23, 33, 11, 16, 27, 175, 15, 106, 131, 57, 115, 134, 136, 138, 148, 149, 103, 138, 143, 148, 137, 111, 144, 149, 138, 135, 138, 132, 130, 149, 138, 144, 143, 180};


//: code
Byte str_gestureBucketName[] = {76, 4, 62, 13, 28, 89, 110, 238, 2, 95, 20, 216, 149, 161, 173, 162, 163, 119};


//: iOS
Byte str_holdName[] = {69, 3, 93, 7, 227, 209, 168, 198, 172, 176, 56};


//: UserAccount
Byte str_handleData[] = {37, 11, 56, 10, 50, 184, 104, 143, 161, 229, 141, 171, 157, 170, 121, 155, 155, 167, 173, 166, 172, 143};


//: account
Byte str_enterpriseScanPopularityName[] = {71, 7, 27, 8, 250, 114, 110, 21, 124, 126, 126, 138, 144, 137, 143, 182};


//: friend_verify_avtivity_net_error
Byte str_investigatorData[] = {76, 32, 32, 6, 9, 232, 134, 146, 137, 133, 142, 132, 127, 150, 133, 146, 137, 134, 153, 127, 129, 150, 148, 137, 150, 137, 148, 153, 127, 142, 133, 148, 127, 133, 146, 146, 143, 146, 130};


//: username
Byte str_sizeNessAxTitle[] = {45, 8, 11, 7, 120, 97, 133, 128, 126, 112, 125, 121, 108, 120, 112, 120};


//: password
Byte str_henTitle[] = {25, 8, 37, 11, 67, 198, 44, 195, 69, 172, 114, 149, 134, 152, 152, 156, 148, 151, 137, 1};


//: /user/ismustmobile
Byte str_readilyContent[] = {78, 18, 50, 8, 141, 245, 144, 236, 97, 167, 165, 151, 164, 97, 155, 165, 159, 167, 165, 166, 159, 161, 148, 155, 158, 151, 70};


//: head_default
Byte str_thighName[] = {92, 12, 98, 4, 202, 199, 195, 198, 193, 198, 199, 200, 195, 215, 206, 214, 112};


//: UserPassWord
Byte str_naturalName[] = {47, 12, 8, 6, 197, 214, 93, 123, 109, 122, 88, 105, 123, 123, 95, 119, 122, 108, 51};


//: passwd
Byte str_eagerTitle[] = {90, 6, 34, 7, 170, 63, 142, 146, 131, 149, 149, 153, 134, 242};


//: question
Byte str_altogetherWithTitle[] = {77, 8, 9, 10, 108, 65, 5, 83, 21, 221, 122, 126, 110, 124, 125, 114, 120, 119, 25};


//: /user/smsregister
Byte str_altogetherTitle[] = {20, 17, 76, 10, 148, 168, 194, 70, 182, 3, 123, 193, 191, 177, 190, 123, 191, 185, 191, 190, 177, 179, 181, 191, 192, 177, 190, 12};


//: msg
Byte str_cellSeventhTitle[] = {52, 3, 70, 8, 125, 137, 250, 247, 179, 185, 173, 136};


//: gender
Byte str_onlyName[] = {52, 6, 24, 11, 228, 128, 87, 102, 4, 228, 234, 127, 125, 134, 124, 125, 138, 29};


//: client
Byte str_missingSeaBadlyData[] = {76, 6, 36, 6, 155, 139, 135, 144, 141, 137, 146, 152, 123};

// __DEBUG__
// __CLOSE_PRINT__
//
//  ContentManager.m
//  NIM
//
//  Created by 彭爽 on 2021/9/6.
//  Copyright © 2021 Netease. All rights reserved.
//

// __M_A_C_R_O__
//: #import "NTESRegistConfigManager.h"
#import "ContentManager.h"

//: @interface NTESRegistConfigManager ()
@interface ContentManager ()
//: @property (nonatomic ,strong) UINavigationController *nav;
@property (nonatomic ,strong) UINavigationController *nav;
//: @end
@end

//: @implementation NTESRegistConfigManager
@implementation ContentManager

//: static NTESRegistConfigManager *shareConfigManager = nil;
static ContentManager *k_teamData = nil;

//: + (NTESRegistConfigManager *)shareConfigManager {
+ (ContentManager *)red {
    //: @synchronized(self) {
    @synchronized(self) {
        //: if (shareConfigManager == nil) {
        if (k_teamData == nil) {
            //: shareConfigManager = [[NTESRegistConfigManager alloc] init];
            k_teamData = [[ContentManager alloc] init];

            //: [shareConfigManager registDictDefault];
            [k_teamData post];
        }
        //: return shareConfigManager;
        return k_teamData;
    }
}

//: - (NSMutableDictionary *)registDictDefault{
- (NSMutableDictionary *)post{
    //: [NTESRegistConfigManager shareConfigManager].registDict = [NSMutableDictionary dictionaryWithCapacity:0];
    [ContentManager red].registDict = [NSMutableDictionary dictionaryWithCapacity:0];
    //: NSMutableDictionary *dict = [NTESRegistConfigManager shareConfigManager].registDict;
    NSMutableDictionary *dict = [ContentManager red].registDict;
    //: [dict setObject:@"iOS" forKey:@"client"];
    [dict setObject:StringFromAdministrativeData(str_holdName) forKey:StringFromAdministrativeData(str_missingSeaBadlyData)];
    //: [dict setObject:@"" forKey:@"invitecode"];
    [dict setObject:@"" forKey:StringFromAdministrativeData(str_readilyCameraName)];
    //: [dict setObject:@"" forKey:@"mobilecode"];
    [dict setObject:@"" forKey:StringFromAdministrativeData(str_tanEconomistValue)];
    //: [dict setObject:@"" forKey:@"question"];
    [dict setObject:@"" forKey:StringFromAdministrativeData(str_altogetherWithTitle)];
    //: [dict setObject:@"" forKey:@"answer"];
    [dict setObject:@"" forKey:StringFromAdministrativeData(str_sweetText)];
    //: [dict setObject:@"1" forKey:@"gender"];
    [dict setObject:@"1" forKey:StringFromAdministrativeData(str_onlyName)];

    //: return [NTESRegistConfigManager shareConfigManager].registDict;
    return [ContentManager red].registDict;
}

//: + (void)refreshRegistConfig{
+ (void)recentGray{

    //: [ZCHttpManager postWithUrl:[NSString stringWithFormat:@"/user/ismustmobile"] params:nil isShow:NO success:^(id responseObject) {
    [FromMessage inputFailed:[NSString stringWithFormat:StringFromAdministrativeData(str_readilyContent)] cartridge:nil addView:NO range:^(id responseObject) {

    //: } failed:^(id responseObject, NSError *error) {
    } doingPath:^(id responseObject, NSError *error) {

    //: }];
    }];
}

//: + (void)firstSendRegistName:(NSString *)name pd:(NSString *)pd RequestWithComplete:(void(^)(BOOL sucess, NSString * msg))complete {
+ (void)view:(NSString *)name signReceive:(NSString *)pd backgroundColor:(void(^)(BOOL sucess, NSString * msg))complete {

    //#define Server_first_regist_config    [NSString stringWithFormat:@"%@/api/validate/check_username_available",[IndueColor sharedConfig].domainURL]
    //: [ZCHttpManager postWithUrl:[NSString stringWithFormat:@"/validate/check_username_available"] params:@{@"username":name , @"passwd":pd } isShow:NO success:^(id responseObject) {
    [FromMessage inputFailed:[NSString stringWithFormat:StringFromAdministrativeData(str_gestureImageName)] cartridge:@{StringFromAdministrativeData(str_sizeNessAxTitle):name , StringFromAdministrativeData(str_eagerTitle):pd } addView:NO range:^(id responseObject) {

        //: NSDictionary *resultDict = (NSDictionary *)responseObject;
        NSDictionary *resultDict = (NSDictionary *)responseObject;
        //: NSString *code = [resultDict newStringValueForKey:@"code"];
        NSString *code = [resultDict cord:StringFromAdministrativeData(str_gestureBucketName)];
        //: NSString *msg = [resultDict newStringValueForKey:@"msg"];
        NSString *msg = [resultDict cord:StringFromAdministrativeData(str_cellSeventhTitle)];
        //: if (code.integerValue == 0) {
        if (code.integerValue == 0) {
            //: !complete ? : complete(YES,msg);
            !complete ? : complete(YES,msg);
        //: } else {
        } else {
            //: [SVProgressHUD showMessage:msg];
            [SVProgressHUD aboveBroadcast:msg];
            //: !complete ? : complete(NO,msg);
            !complete ? : complete(NO,msg);
        }

    //: } failed:^(id responseObject, NSError *error) {
    } doingPath:^(id responseObject, NSError *error) {
        //: !complete ? : complete(NO,[NTESLanguageManager getTextWithKey:@"friend_verify_avtivity_net_error"]);
        !complete ? : complete(NO,[MaxInformation off:StringFromAdministrativeData(str_investigatorData)]);
    //: }];
    }];
}


//: + (void)sendRegistRequest:(UINavigationController *)nav{
+ (void)ingathering:(UINavigationController *)nav{

    //: [NTESRegistConfigManager shareConfigManager].nav = nav;
    [ContentManager red].nav = nav;
    //: NSString *ismustmobile = [NIMUserDefaults standardUserDefaults].ismustmobile;
    NSString *ismustmobile = [WastepaperBasketDefaults at].ismustmobile;//是否手机

    //: if ([NTESRegistConfigManager shareConfigManager].headerImage == nil) {
    if ([ContentManager red].headerImage == nil) {//默认头像
        //: [NTESRegistConfigManager shareConfigManager].headerImage = [UIImage imageNamed:@"head_default"];
        [ContentManager red].headerImage = [UIImage imageNamed:StringFromAdministrativeData(str_thighName)];
    }

    //: if (ismustmobile.integerValue > 0) {
    if (ismustmobile.integerValue > 0) {
        //: [[NTESRegistConfigManager shareConfigManager] mobileRegist];
        [[ContentManager red] success];
    //: }else{
    }else{
        //: [[NTESRegistConfigManager shareConfigManager] accountRegist];
        [[ContentManager red] regist];

    }

}

//: -(void)mobileRegist{
-(void)success{

    //: NSString *account = [[NTESRegistConfigManager shareConfigManager].registDict newStringValueForKey:@"account"];
    NSString *account = [[ContentManager red].registDict cord:StringFromAdministrativeData(str_enterpriseScanPopularityName)];
    //: [[NTESRegistConfigManager shareConfigManager].registDict setObject:account forKey:@"mobile"];
    [[ContentManager red].registDict setObject:account forKey:StringFromAdministrativeData(str_conservationTitle)];

    //: NSDictionary *dict = [NTESRegistConfigManager shareConfigManager].registDict;
    NSDictionary *dict = [ContentManager red].registDict;
    //: UIImage *image = [NTESRegistConfigManager shareConfigManager].headerImage;
    UIImage *image = [ContentManager red].headerImage;

    //: if (!image) {
    if (!image) {

        //: [ZCHttpManager uploadImagesWithURL:[NSString stringWithFormat:@"/user/smsregister"] parameters:dict images:@[UIImageJPEGRepresentation(image, 0.3)] progress:^(NSProgress *progress) {
        [FromMessage call:[NSString stringWithFormat:StringFromAdministrativeData(str_altogetherTitle)] progress:dict when:@[UIImageJPEGRepresentation(image, 0.3)] tap:^(NSProgress *progress) {

        //: } success:^(id responseObject) {
        } displayResponseSuccess:^(id responseObject) {
            //: NSLog(@"%@",responseObject);
            //: [self.nav popToRootViewControllerAnimated:YES];
            [self.nav popToRootViewControllerAnimated:YES];


        //: } failed:^(id responseObject, NSError *error) {
        } bluishFailed:^(id responseObject, NSError *error) {
            //: NSLog(@"%@",error);

        //: }];
        }];
    //: }else{
    }else{
        //: [ZCHttpManager getWithUrl:[NSString stringWithFormat:@"/user/smsregister"] params:dict isShow:YES success:^(id responseObject) {
        [FromMessage maxColor:[NSString stringWithFormat:StringFromAdministrativeData(str_altogetherTitle)] flush:dict countIn:YES alongResponseSuccess:^(id responseObject) {
            //: NSDictionary *resultDict = (NSDictionary *)responseObject;
            NSDictionary *resultDict = (NSDictionary *)responseObject;
            //: NSString *code = [resultDict newStringValueForKey:@"code"];
            NSString *code = [resultDict cord:StringFromAdministrativeData(str_gestureBucketName)];
            //: NSString *msg = [resultDict newStringValueForKey:@"msg"];
            NSString *msg = [resultDict cord:StringFromAdministrativeData(str_cellSeventhTitle)];
            //: [SVProgressHUD showMessage:msg];
            [SVProgressHUD aboveBroadcast:msg];
            //: if (code.integerValue <= 0) {
            if (code.integerValue <= 0) {
                //: [self.nav popToRootViewControllerAnimated:YES];
                [self.nav popToRootViewControllerAnimated:YES];

                //: NSMutableDictionary *notiDict = [NSMutableDictionary dictionaryWithCapacity:0];
                NSMutableDictionary *notiDict = [NSMutableDictionary dictionaryWithCapacity:0];
                //: [notiDict setObject:[dict newStringValueForKey:@"account"] ? :@"" forKey:@"UserAccount"];
                [notiDict setObject:[dict cord:StringFromAdministrativeData(str_enterpriseScanPopularityName)] ? :@"" forKey:StringFromAdministrativeData(str_handleData)];
                //: [notiDict setObject:[dict newStringValueForKey:@"password"] ? :@"" forKey:@"UserPassWord"];
                [notiDict setObject:[dict cord:StringFromAdministrativeData(str_henTitle)] ? :@"" forKey:StringFromAdministrativeData(str_naturalName)];
                //: [[NSNotificationCenter defaultCenter] postNotificationName:@"RegistFinshNotification" object:notiDict];
                [[NSNotificationCenter defaultCenter] postNotificationName:StringFromAdministrativeData(str_revEncounterTitle) object:notiDict];


            }
        //: } failed:^(id responseObject, NSError *error) {
        } searched:^(id responseObject, NSError *error) {

        //: }];
        }];
    }


}

//: -(void)accountRegist{
-(void)regist{

    //: NSDictionary *dict = [NTESRegistConfigManager shareConfigManager].registDict;
    NSDictionary *dict = [ContentManager red].registDict;
    //: UIImage *image = [NTESRegistConfigManager shareConfigManager].headerImage;
    UIImage *image = [ContentManager red].headerImage;
    //: UIImage *imageForAvatarUpload = [image imageByScalingAndCroppingForSize:CGSizeMake(150, 150)];
    UIImage *imageForAvatarUpload = [image scaling:CGSizeMake(150, 150)];


    //: if (image) {
    if (image) {
        //: [ZCHttpManager uploadImagesWithURL:[NSString stringWithFormat:@"/user/register"] parameters:dict images:@[UIImageJPEGRepresentation(imageForAvatarUpload, 0.7)] progress:^(NSProgress *progress) {
        [FromMessage call:[NSString stringWithFormat:StringFromAdministrativeData(str_luckySweetContent)] progress:dict when:@[UIImageJPEGRepresentation(imageForAvatarUpload, 0.7)] tap:^(NSProgress *progress) {

        //: } success:^(id responseObject) {
        } displayResponseSuccess:^(id responseObject) {
            //: NSDictionary *resultDict = (NSDictionary *)responseObject;
            NSDictionary *resultDict = (NSDictionary *)responseObject;
            //: NSString *code = [resultDict newStringValueForKey:@"code"];
            NSString *code = [resultDict cord:StringFromAdministrativeData(str_gestureBucketName)];
            //: NSString *msg = [resultDict newStringValueForKey:@"msg"];
            NSString *msg = [resultDict cord:StringFromAdministrativeData(str_cellSeventhTitle)];
            //: [SVProgressHUD showMessage:msg];
            [SVProgressHUD aboveBroadcast:msg];

            //: if (code.integerValue <= 0) {
            if (code.integerValue <= 0) {
                //: [self.nav popToRootViewControllerAnimated:YES];
                [self.nav popToRootViewControllerAnimated:YES];
                //: NSMutableDictionary *notiDict = [NSMutableDictionary dictionaryWithCapacity:0];
                NSMutableDictionary *notiDict = [NSMutableDictionary dictionaryWithCapacity:0];
                //: NSString *mobile = [dict newStringValueForKey:@"mobile"] ? :@"";
                NSString *mobile = [dict cord:StringFromAdministrativeData(str_conservationTitle)] ? :@"";
                //: NSString *account = [dict newStringValueForKey:@"account"] ? :@"";
                NSString *account = [dict cord:StringFromAdministrativeData(str_enterpriseScanPopularityName)] ? :@"";
                //: NSString *UserAccount = mobile.length > 0 ? mobile:account ;
                NSString *UserAccount = mobile.length > 0 ? mobile:account ;
                //: NSString *UserPassWord = [dict newStringValueForKey:@"password"] ? :@"";
                NSString *UserPassWord = [dict cord:StringFromAdministrativeData(str_henTitle)] ? :@"";
                //: [notiDict setObject:UserAccount forKey:@"UserAccount"];
                [notiDict setObject:UserAccount forKey:StringFromAdministrativeData(str_handleData)];
                //: [notiDict setObject:UserPassWord forKey:@"UserPassWord"];
                [notiDict setObject:UserPassWord forKey:StringFromAdministrativeData(str_naturalName)];
                //: [[NSNotificationCenter defaultCenter] postNotificationName:@"RegistFinshNotification" object:notiDict];
                [[NSNotificationCenter defaultCenter] postNotificationName:StringFromAdministrativeData(str_revEncounterTitle) object:notiDict];
            }

        //: } failed:^(id responseObject, NSError *error) {
        } bluishFailed:^(id responseObject, NSError *error) {
            //: [SVProgressHUD showMessage:[NTESLanguageManager getTextWithKey:@"register_avtivity3_register_fail"]];
            [SVProgressHUD aboveBroadcast:[MaxInformation off:StringFromAdministrativeData(str_imageFessTanName)]];

        //: }];
        }];
    }
}

//: @end
@end

Byte * AdministrativeDataToCache(Byte *data) {
    int investigating = data[0];
    int hesitateRitual = data[1];
    Byte refugeeBasketball = data[2];
    int degraded = data[3];
    if (!investigating) return data + degraded;
    for (int i = degraded; i < degraded + hesitateRitual; i++) {
        int value = data[i] - refugeeBasketball;
        if (value < 0) {
            value += 256;
        }
        data[i] = value;
    }
    data[0] = 0;
    data[degraded + hesitateRitual] = 0;
    return data + degraded;
}

NSString *StringFromAdministrativeData(Byte *data) {
    return [NSString stringWithUTF8String:(char *)AdministrativeDataToCache(data)];
}
