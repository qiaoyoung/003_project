
#import <Foundation/Foundation.h>
typedef struct {
    Byte prod;
    Byte *imageAlcohol;
    unsigned int religionKeyAnimal;
    bool fileDeveloper;
	int damText;
} MagnitudeoneData;

NSString *StringFromMagnitudeoneData(MagnitudeoneData *data);


//: icon_setting_pressed
MagnitudeoneData str_sweetName = (MagnitudeoneData){37, (Byte []){76, 70, 74, 75, 122, 86, 64, 81, 81, 76, 75, 66, 122, 85, 87, 64, 86, 86, 64, 65, 144}, 20, false, 35};


//: main_tab_my
MagnitudeoneData str_tableWithSpeciallyValue = (MagnitudeoneData){44, (Byte []){65, 77, 69, 66, 115, 88, 77, 78, 115, 65, 85, 38}, 11, false, 110};


//: image
MagnitudeoneData str_attractiveText = (MagnitudeoneData){127, (Byte []){22, 18, 30, 24, 26, 141}, 5, false, 58};


//: icon_setting_normal
MagnitudeoneData str_animalCustomPostValue = (MagnitudeoneData){119, (Byte []){30, 20, 24, 25, 40, 4, 18, 3, 3, 30, 25, 16, 40, 25, 24, 5, 26, 22, 27, 149}, 19, false, 56};


//: #888888
MagnitudeoneData str_eveningName = (MagnitudeoneData){52, (Byte []){23, 12, 12, 12, 12, 12, 12, 147}, 7, false, 226};


//: #875FFA
MagnitudeoneData str_moleFlavorName = (MagnitudeoneData){177, (Byte []){146, 137, 134, 132, 247, 247, 240, 20}, 7, false, 133};


//: icon_message_pressed
MagnitudeoneData str_progressIconMinName = (MagnitudeoneData){184, (Byte []){209, 219, 215, 214, 231, 213, 221, 203, 203, 217, 223, 221, 231, 200, 202, 221, 203, 203, 221, 220, 192}, 20, false, 202};


//: #612CF9
MagnitudeoneData str_equalByContent = (MagnitudeoneData){44, (Byte []){15, 26, 29, 30, 111, 106, 21, 29}, 7, false, 47};


//: title
MagnitudeoneData str_seaValue = (MagnitudeoneData){79, (Byte []){59, 38, 59, 35, 42, 84}, 5, false, 199};


//: #A148FF
MagnitudeoneData str_horseData = (MagnitudeoneData){222, (Byte []){253, 159, 239, 234, 230, 152, 152, 63}, 7, false, 209};


//: KEKENotificationLanguageChanged
MagnitudeoneData str_fractionValue = (MagnitudeoneData){249, (Byte []){178, 188, 178, 188, 183, 150, 141, 144, 159, 144, 154, 152, 141, 144, 150, 151, 181, 152, 151, 158, 140, 152, 158, 156, 186, 145, 152, 151, 158, 156, 157, 132}, 31, false, 201};


//: icon_message_normal
MagnitudeoneData str_wasteContent = (MagnitudeoneData){50, (Byte []){91, 81, 93, 92, 109, 95, 87, 65, 65, 83, 85, 87, 109, 92, 93, 64, 95, 83, 94, 192}, 19, false, 14};


//: selectedImage
MagnitudeoneData str_tingThoughtContent = (MagnitudeoneData){215, (Byte []){164, 178, 187, 178, 180, 163, 178, 179, 158, 186, 182, 176, 178, 47}, 13, false, 42};


//: icon_contact_pressed
MagnitudeoneData str_investigatorValue = (MagnitudeoneData){144, (Byte []){249, 243, 255, 254, 207, 243, 255, 254, 228, 241, 243, 228, 207, 224, 226, 245, 227, 227, 245, 244, 229}, 20, false, 215};


//: activity_user_profile_chat
MagnitudeoneData str_pointAttractData = (MagnitudeoneData){185, (Byte []){216, 218, 205, 208, 207, 208, 205, 192, 230, 204, 202, 220, 203, 230, 201, 203, 214, 223, 208, 213, 220, 230, 218, 209, 216, 205, 76}, 26, false, 100};


//: badgeValue
MagnitudeoneData str_onlyWithTitle = (MagnitudeoneData){79, (Byte []){45, 46, 43, 40, 42, 25, 46, 35, 58, 42, 122}, 10, false, 26};


//: icon_contact_normal
MagnitudeoneData str_tingHareData = (MagnitudeoneData){145, (Byte []){248, 242, 254, 255, 206, 242, 254, 255, 229, 240, 242, 229, 206, 255, 254, 227, 252, 240, 253, 67}, 19, false, 113};


//: #000000
MagnitudeoneData str_withThroatName = (MagnitudeoneData){24, (Byte []){59, 40, 40, 40, 40, 40, 40, 7}, 7, false, 152};


//: contacts_list_title
MagnitudeoneData str_cellCompetitiveValue = (MagnitudeoneData){165, (Byte []){198, 202, 203, 209, 196, 198, 209, 214, 250, 201, 204, 214, 209, 250, 209, 204, 209, 201, 192, 117}, 19, false, 120};

// __DEBUG__
// __CLOSE_PRINT__
//
//  MainTabController.m
//  NIMDemo
//
//  Created by chris on 15/2/2.
//  Copyright (c) 2015年 Netease. All rights reserved.
//

// __M_A_C_R_O__
//: #import "NTESMainTabController.h"
#import "CutBarController.h"
//: #import "CCCAppDelegate.h"
#import "AppDelegate.h"
//: #import "NTESSessionListViewController.h"
#import "StatusViewController.h"
//: #import "UIImage+NTESColor.h"
#import "UIImage+ChemicalElement.h"
//: #import "NTESCustomNotificationDB.h"
#import "HideAddLight.h"
//: #import "NTESNotificationCenter.h"
#import "IronedCenter.h"
//: #import "NTESNavigationHandler.h"
#import "IndicatorHandler.h"
//: #import "NTESNavigationAnimator.h"
#import "ComputerFilenameInformation.h"
//: #import "NTESBundleSetting.h"
#import "NameLine.h"
//: #import "CCCContactsViewController.h"
#import "InformationViewController.h"
//: #import "NTESVideoListViewController.h"
#import "MinViewController.h"
//: #import "NTESMainCenterViewController.h"
#import "DisableIndicatorViewController.h"
//: #import "CustomTabBar.h"
#import "TitleContainerView.h"
//: #import "CustomTabBarController.h"
#import "StatusTeamViewController.h"

//: typedef NS_ENUM(NSInteger,NTESMainTabType) {
typedef NS_ENUM(NSInteger,NTESMainTabType) {
    //: NTESMainTabTypeMessageList, 
    NTESMainTabTypeMessageList, //聊天
    //: NTESMainTabTypeContact, 
    NTESMainTabTypeContact, //通讯录
    //: NTESMainTabTypeChatroomList, 
    NTESMainTabTypeChatroomList, //聊天室
    //: NTESMainTabTypeSetting, 
    NTESMainTabTypeSetting, //设置
//: };
};

//: @interface NTESMainTabController ()<NIMSystemNotificationManagerDelegate,NIMConversationManagerDelegate,NIMChatManagerDelegate,NIMLoginManagerDelegate,CustomTabBarControllerDelegate>
@interface CutBarController ()<NIMSystemNotificationManagerDelegate,NIMConversationManagerDelegate,NIMChatManagerDelegate,NIMLoginManagerDelegate,HideUpgrade>

//: @property (nonatomic,strong) NSArray *navigationHandlers;
@property (nonatomic,strong) NSArray *navigationHandlers;

//: @property (nonatomic,strong) NTESNavigationAnimator *animator;
@property (nonatomic,strong) ComputerFilenameInformation *animator;

//: @property (nonatomic,assign) NSInteger sessionUnreadCount;
@property (nonatomic,assign) NSInteger sessionUnreadCount;

//: @property (nonatomic,assign) NSInteger systemUnreadCount;
@property (nonatomic,assign) NSInteger systemUnreadCount;

//: @property (nonatomic,assign) NSInteger customSystemUnreadCount;
@property (nonatomic,assign) NSInteger customSystemUnreadCount;

//: @property (nonatomic,copy) NSDictionary *configs;
@property (nonatomic,copy) NSDictionary *configs;

//: @end
@end

//: @implementation NTESMainTabController
@implementation CutBarController

//: + (instancetype)instance{
+ (instancetype)textInstance{
    //: CCCAppDelegate *delegete = (CCCAppDelegate *)[UIApplication sharedApplication].delegate;
    AppDelegate *delegete = (AppDelegate *)[UIApplication sharedApplication].delegate;
    //: UIViewController *vc = delegete.window.rootViewController;
    UIViewController *vc = delegete.window.rootViewController;
    //: if ([vc isKindOfClass:[NTESMainTabController class]]) {
    if ([vc isKindOfClass:[CutBarController class]]) {
        //: return (NTESMainTabController *)vc;
        return (CutBarController *)vc;
    //: }else{
    }else{
        //: return nil;
        return nil;
    }
}


//: - (void)viewDidLoad {
- (void)viewDidLoad {
    //: [super viewDidLoad];
    [super viewDidLoad];
    //: [self setUpSubNav];
    [self thanBack];
    //: [[NIMSDK sharedSDK].systemNotificationManager addDelegate:self];
    [[NIMSDK sharedSDK].systemNotificationManager addDelegate:self];
    //: [[NIMSDK sharedSDK].conversationManager addDelegate:self];
    [[NIMSDK sharedSDK].conversationManager addDelegate:self];

    //: extern NSString *NTESCustomNotificationCountChanged;
    extern NSString *k_versionData;
    //: [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(onCustomNotifyChanged:) name:NTESCustomNotificationCountChanged object:nil];
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(harvestMoonChanged:) name:k_versionData object:nil];
    //: [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(languageChanged:) name:@"KEKENotificationLanguageChanged" object:nil];
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(withses:) name:StringFromMagnitudeoneData(&str_fractionValue) object:nil];

    // 设置自定义TabBar的颜色
    //: self.customTabBar.itemTintColor = [UIColor colorWithHexString:@"#888888"];
    self.customTabBar.itemTintColor = [UIColor direction:StringFromMagnitudeoneData(&str_eveningName)];
    //: self.customTabBar.selectedItemTintColor = [UIColor colorWithHexString:@"#000000"];
    self.customTabBar.selectedItemTintColor = [UIColor direction:StringFromMagnitudeoneData(&str_withThroatName)];

    //: self.delegate = self;
    self.delegate = self;
}

//: - (BOOL)customTabBarController:(UIViewController *)tabBarController shouldSelectViewController:(UIViewController *)viewController {
- (BOOL)buttonFinish:(UIViewController *)tabBarController drageeLink:(UIViewController *)viewController {
    //: [UIView setAnimationsEnabled:NO];
    [UIView setAnimationsEnabled:NO];
    //: return YES;
    return YES;
}

//: - (void)customTabBarController:(UIViewController *)tabBarController didSelectViewController:(UIViewController *)viewController {
- (void)view:(UIViewController *)tabBarController domainQuick:(UIViewController *)viewController {
    //: [UIView setAnimationsEnabled:YES];
    [UIView setAnimationsEnabled:YES];
}

//: - (void)viewWillAppear:(BOOL)animated{
- (void)viewWillAppear:(BOOL)animated{
    //: [super viewWillAppear:animated];
    [super viewWillAppear:animated];

    // 设置自定义TabBar的颜色
    //: self.customTabBar.itemTintColor = [UIColor colorWithHexString:@"#888888"];
    self.customTabBar.itemTintColor = [UIColor direction:StringFromMagnitudeoneData(&str_eveningName)];
    //: self.customTabBar.selectedItemTintColor = [UIColor colorWithHexString:@"#000000"];
    self.customTabBar.selectedItemTintColor = [UIColor direction:StringFromMagnitudeoneData(&str_withThroatName)];

    // 如果是根视图控制器，应该显示 TabBar
    //: BOOL isRoot = YES;
    BOOL isRoot = YES;
    //: for (UINavigationController *nav in self.viewControllers) {
    for (UINavigationController *nav in self.viewControllers) {
        //: if (nav.viewControllers.count > 1) {
        if (nav.viewControllers.count > 1) {
            //: isRoot = NO;
            isRoot = NO;
            //: break;
            break;
        }
    }

    //: if (isRoot && self.customTabBar.hidden) {
    if (isRoot && self.customTabBar.hidden) {
        //: [self showTabBar];
        [self message];
    }
}

//: - (void)viewDidAppear:(BOOL)animated
- (void)viewDidAppear:(BOOL)animated
{
    //: [super viewDidAppear:animated];
    [super viewDidAppear:animated];
    //会话界面发送拍摄的视频，拍摄结束后点击发送后可能顶部会有红条，导致的界面错位。
    //: self.view.frame = [UIScreen mainScreen].bounds;
    self.view.frame = [UIScreen mainScreen].bounds;
}

//: - (void)dealloc{
- (void)dealloc{
    //: [[NIMSDK sharedSDK].systemNotificationManager removeDelegate:self];
    [[NIMSDK sharedSDK].systemNotificationManager removeDelegate:self];
    //: [[NIMSDK sharedSDK].conversationManager removeDelegate:self];
    [[NIMSDK sharedSDK].conversationManager removeDelegate:self];
    //: [[NSNotificationCenter defaultCenter] removeObserver:self];
    [[NSNotificationCenter defaultCenter] removeObserver:self];
}

//: - (NSArray*)tabbars{
- (NSArray*)max{
    //: self.sessionUnreadCount = [NIMSDK sharedSDK].conversationManager.allUnreadCount;
    self.sessionUnreadCount = [NIMSDK sharedSDK].conversationManager.allUnreadCount;
//    self.systemUnreadCount   = [NIMSDK sharedSDK].systemNotificationManager.allUnreadCount;
    //: self.customSystemUnreadCount = [[NTESCustomNotificationDB sharedInstance] unreadCount];
    self.customSystemUnreadCount = [[HideAddLight count] unreadCount];
    //: NSMutableArray *items = [[NSMutableArray alloc] init];
    NSMutableArray *items = [[NSMutableArray alloc] init];

    //: [items addObject:@(0)];
    [items addObject:@(0)];
    //: [items addObject:@(1)];
    [items addObject:@(1)];
    //: [items addObject:@(2)];
    [items addObject:@(2)];
//    [items addObject:@(3)];

    //: return items;
    return items;
}

//: #pragma mark - Notification
#pragma mark - Notification
//: - (void)languageChanged:(NSNotification *)noti {
- (void)withses:(NSNotification *)noti {
    // 重新设置导航栏和标签栏
    //: [self setUpSubNav];
    [self thanBack];

    // 确保在语言切换后 TabBar 可见
    //: dispatch_after(dispatch_time((0ull), (int64_t)(0.1 * 1000000000ull)), dispatch_get_main_queue(), ^{
    dispatch_after(dispatch_time((0ull), (int64_t)(0.1 * 1000000000ull)), dispatch_get_main_queue(), ^{
        //: if (self.customTabBar.hidden) {
        if (self.customTabBar.hidden) {
            //: [self showTabBar];
            [self message];
        }
    //: });
    });
}

//: - (void)setUpSubNav{
- (void)thanBack{
    //: NSMutableArray *handleArray = [[NSMutableArray alloc] init];
    NSMutableArray *handleArray = [[NSMutableArray alloc] init];
    //: NSMutableArray *vcArray = [[NSMutableArray alloc] init];
    NSMutableArray *vcArray = [[NSMutableArray alloc] init];
    //: [self.tabbars enumerateObjectsUsingBlock:^(id obj, NSUInteger idx, BOOL *stop) {
    [self.max enumerateObjectsUsingBlock:^(id obj, NSUInteger idx, BOOL *stop) {
        //: NSDictionary * item =[self vcInfoForTabType:[obj integerValue]];
        NSDictionary * item =[self on:[obj integerValue]];
        //: NSString *vcName = item[@"vc"];
        NSString *vcName = item[@"vc"];
        //: NSString *title = @"";
        NSString *title = @"";
        //: if(idx == 0){
        if(idx == 0){
            //: title = [NTESLanguageManager getTextWithKey:@"activity_user_profile_chat"];
            title = [MaxInformation off:StringFromMagnitudeoneData(&str_pointAttractData)];
        //: }else if (idx == 1){
        }else if (idx == 1){
            //: title = [NTESLanguageManager getTextWithKey:@"contacts_list_title"];
            title = [MaxInformation off:StringFromMagnitudeoneData(&str_cellCompetitiveValue)];
        //: }else if (idx == 2){
        }else if (idx == 2){
            //: title = [NTESLanguageManager getTextWithKey:@"main_tab_my"];
            title = [MaxInformation off:StringFromMagnitudeoneData(&str_tableWithSpeciallyValue)];
        }

        //: NSString *imageName = item[@"image"];
        NSString *imageName = item[StringFromMagnitudeoneData(&str_attractiveText)];
        //: NSString *imageSelected = item[@"selectedImage"];
        NSString *imageSelected = item[StringFromMagnitudeoneData(&str_tingThoughtContent)];
        //: Class clazz = NSClassFromString(vcName);
        Class clazz = NSClassFromString(vcName);
        //: UIViewController *vc = [[clazz alloc] initWithNibName:nil bundle:nil];
        UIViewController *vc = [[clazz alloc] initWithNibName:nil bundle:nil];
        //: vc.hidesBottomBarWhenPushed = NO;
        vc.hidesBottomBarWhenPushed = NO;
        //: UINavigationController *nav = [[UINavigationController alloc] initWithRootViewController:vc];
        UINavigationController *nav = [[UINavigationController alloc] initWithRootViewController:vc];

        //: UIImage *normalImage = [UIImage imageNamed:imageName];
        UIImage *normalImage = [UIImage imageNamed:imageName];
        //: normalImage = [normalImage imageWithRenderingMode:UIImageRenderingModeAlwaysOriginal];
        normalImage = [normalImage imageWithRenderingMode:UIImageRenderingModeAlwaysOriginal];
        //: UIImage *selectImage = [UIImage imageNamed:imageSelected];
        UIImage *selectImage = [UIImage imageNamed:imageSelected];
        //: selectImage = [selectImage imageWithRenderingMode:UIImageRenderingModeAlwaysOriginal];
        selectImage = [selectImage imageWithRenderingMode:UIImageRenderingModeAlwaysOriginal];

        //: nav.tabBarItem = [[UITabBarItem alloc] initWithTitle:title
        nav.tabBarItem = [[UITabBarItem alloc] initWithTitle:title
                                                       //: image:normalImage
                                                       image:normalImage
                                               //: selectedImage:selectImage];
                                               selectedImage:selectImage];
        //: nav.tabBarItem.tag = idx;
        nav.tabBarItem.tag = idx;
        //: NSInteger badge = [item[@"badgeValue"] integerValue];
        NSInteger badge = [item[StringFromMagnitudeoneData(&str_onlyWithTitle)] integerValue];
        //: if (badge) {
        if (badge) {
            //: nav.tabBarItem.badgeValue = [NSString stringWithFormat:@"%zd",badge];
            nav.tabBarItem.badgeValue = [NSString stringWithFormat:@"%zd",badge];
        }
        //: NTESNavigationHandler *handler = [[NTESNavigationHandler alloc] initWithNavigationController:nav];
        IndicatorHandler *handler = [[IndicatorHandler alloc] initWithViewQuick:nav];
        //: nav.delegate = handler;
        nav.delegate = handler;

        //: if (@available(iOS 15.0, *)) {
        if (@available(iOS 15.0, *)) {

            //: NSDictionary *dic = @{NSForegroundColorAttributeName : [UIColor whiteColor],
            NSDictionary *dic = @{NSForegroundColorAttributeName : [UIColor whiteColor],
                                  //: NSFontAttributeName : [UIFont boldSystemFontOfSize:11]};
                                  NSFontAttributeName : [UIFont boldSystemFontOfSize:11]};

            //: UINavigationBarAppearance *barApp = [UINavigationBarAppearance new];
            UINavigationBarAppearance *barApp = [UINavigationBarAppearance new];
            //: barApp.backgroundColor = [UIColor colorWithHexString:@"#A148FF"];
            barApp.backgroundColor = [UIColor direction:StringFromMagnitudeoneData(&str_horseData)];
            //: barApp.shadowColor = [UIColor colorWithHexString:@"#A148FF"];
            barApp.shadowColor = [UIColor direction:StringFromMagnitudeoneData(&str_horseData)];
            //: barApp.titleTextAttributes = dic;
            barApp.titleTextAttributes = dic;

            //: nav.navigationBar.scrollEdgeAppearance = barApp;
            nav.navigationBar.scrollEdgeAppearance = barApp;
            //: nav.navigationBar.standardAppearance = barApp;
            nav.navigationBar.standardAppearance = barApp;
        }

        //: [vcArray addObject:nav];
        [vcArray addObject:nav];
        //: [handleArray addObject:handler];
        [handleArray addObject:handler];
    //: }];
    }];
    //: self.viewControllers = [NSArray arrayWithArray:vcArray];
    self.viewControllers = [NSArray arrayWithArray:vcArray];
    //: self.navigationHandlers = [NSArray arrayWithArray:handleArray];
    self.navigationHandlers = [NSArray arrayWithArray:handleArray];


    //: UINavigationBar *navBar = [UINavigationBar appearance];
    UINavigationBar *navBar = [UINavigationBar appearance];

    //: NSDictionary *dic = @{NSForegroundColorAttributeName : [UIColor blackColor],
    NSDictionary *dic = @{NSForegroundColorAttributeName : [UIColor blackColor],
                          //: NSFontAttributeName : [UIFont boldSystemFontOfSize:16]};
                          NSFontAttributeName : [UIFont boldSystemFontOfSize:16]};

    //: navBar.barTintColor = [UIColor colorWithPatternImage:[SNGradientHelper getLinearGradientImage:[UIColor colorWithHexString:@"#875FFA"] and:[UIColor colorWithHexString:@"#612CF9"] directionType:SNLinearGradientDirectionVertical]];
    navBar.barTintColor = [UIColor colorWithPatternImage:[LandHelper title:[UIColor direction:StringFromMagnitudeoneData(&str_moleFlavorName)] view:[UIColor direction:StringFromMagnitudeoneData(&str_equalByContent)] textGradientDirection:SNLinearGradientDirectionVertical]];
    //: [navBar setTitleTextAttributes:dic];
    [navBar setTitleTextAttributes:dic];
    //: [navBar setShadowImage:[UIImage new]];
    [navBar setShadowImage:[UIImage new]];
    //: [navBar setBackgroundImage:[SNGradientHelper getLinearGradientImage:[UIColor colorWithHexString:@"#875FFA"] and:[UIColor colorWithHexString:@"#612CF9"] directionType:SNLinearGradientDirectionLevel] forBarMetrics:UIBarMetricsDefault];
    [navBar setBackgroundImage:[LandHelper title:[UIColor direction:StringFromMagnitudeoneData(&str_moleFlavorName)] view:[UIColor direction:StringFromMagnitudeoneData(&str_equalByContent)] textGradientDirection:SNLinearGradientDirectionLevel] forBarMetrics:UIBarMetricsDefault];

    //: navBar.translucent = YES;
    navBar.translucent = YES;
    //: navBar.tintColor = [UIColor grayColor];
    navBar.tintColor = [UIColor grayColor];

    // 设置自定义TabBar的样式
    //: self.customTabBar.backgroundColor = [UIColor whiteColor];
    self.customTabBar.backgroundColor = [UIColor whiteColor];
    // 刷新自定义TabBar
    //: [self.customTabBar refreshTabBarItems];
    [self.customTabBar tab];
}

//: - (void)viewDidLayoutSubviews {
- (void)viewDidLayoutSubviews {
    //: [super viewDidLayoutSubviews];
    [super viewDidLayoutSubviews];
}

//: #pragma mark - NIMConversationManagerDelegate
#pragma mark - NIMConversationManagerDelegate
//: - (void)didAddRecentSession:(NIMRecentSession *)recentSession
- (void)didAddRecentSession:(NIMRecentSession *)recentSession
           //: totalUnreadCount:(NSInteger)totalUnreadCount{
           totalUnreadCount:(NSInteger)totalUnreadCount{
    //: self.sessionUnreadCount = totalUnreadCount;
    self.sessionUnreadCount = totalUnreadCount;
    //: [self refreshSessionBadge];
    [self monthChild];
}


//: - (void)didUpdateRecentSession:(NIMRecentSession *)recentSession
- (void)didUpdateRecentSession:(NIMRecentSession *)recentSession
              //: totalUnreadCount:(NSInteger)totalUnreadCount{
              totalUnreadCount:(NSInteger)totalUnreadCount{
    //: self.sessionUnreadCount = totalUnreadCount;
    self.sessionUnreadCount = totalUnreadCount;
    //: [self refreshSessionBadge];
    [self monthChild];
}

//: - (void)didUpdateUnreadCountDic:(NSDictionary *)unreadCountDic
- (void)didUpdateUnreadCountDic:(NSDictionary *)unreadCountDic
{
    //: NSLog(@"%@",unreadCountDic);
    //: NSInteger unreadCount = [[NIMSDK sharedSDK].conversationManager allUnreadCount:YES];
    NSInteger unreadCount = [[NIMSDK sharedSDK].conversationManager allUnreadCount:YES];
    //: self.sessionUnreadCount = unreadCount;
    self.sessionUnreadCount = unreadCount;
    //: [self refreshSessionBadge];
    [self monthChild];
}

//: - (void)didRemoveRecentSession:(NIMRecentSession *)recentSession totalUnreadCount:(NSInteger)totalUnreadCount{
- (void)didRemoveRecentSession:(NIMRecentSession *)recentSession totalUnreadCount:(NSInteger)totalUnreadCount{
    //: self.sessionUnreadCount = totalUnreadCount;
    self.sessionUnreadCount = totalUnreadCount;
    //: [self refreshSessionBadge];
    [self monthChild];
}

//: - (void)messagesDeletedInSession:(NIMSession *)session{
- (void)messagesDeletedInSession:(NIMSession *)session{
    //: self.sessionUnreadCount = [NIMSDK sharedSDK].conversationManager.allUnreadCount;
    self.sessionUnreadCount = [NIMSDK sharedSDK].conversationManager.allUnreadCount;
    //: [self refreshSessionBadge];
    [self monthChild];
}

//: - (void)allMessagesDeleted{
- (void)allMessagesDeleted{
    //: self.sessionUnreadCount = 0;
    self.sessionUnreadCount = 0;
    //: [self refreshSessionBadge];
    [self monthChild];
}

//: - (void)allMessagesRead
- (void)allMessagesRead
{
    //: self.sessionUnreadCount = 0;
    self.sessionUnreadCount = 0;
    //: [self refreshSessionBadge];
    [self monthChild];
}

//: - (void)onBatchMarkMessagesReadInSessions:(NSArray<NIMSession *> *)sessions
- (void)onBatchMarkMessagesReadInSessions:(NSArray<NIMSession *> *)sessions
{
    //: self.sessionUnreadCount = [NIMSDK sharedSDK].conversationManager.allUnreadCount;
    self.sessionUnreadCount = [NIMSDK sharedSDK].conversationManager.allUnreadCount;
    //: [self refreshSessionBadge];
    [self monthChild];
}

//: #pragma mark - NIMSystemNotificationManagerDelegate
#pragma mark - NIMSystemNotificationManagerDelegate
//: - (void)onSystemNotificationCountChanged:(NSInteger)unreadCount
- (void)onSystemNotificationCountChanged:(NSInteger)unreadCount
{
    //: self.systemUnreadCount = unreadCount;
    self.systemUnreadCount = unreadCount;
    //: [self refreshContactBadge];
    [self name];
}

//: #pragma mark - Notification
#pragma mark - Notification
//: - (void)onCustomNotifyChanged:(NSNotification *)notification
- (void)harvestMoonChanged:(NSNotification *)notification
{
    //: NTESCustomNotificationDB *db = [NTESCustomNotificationDB sharedInstance];
    HideAddLight *db = [HideAddLight count];
    //: self.customSystemUnreadCount = db.unreadCount;
    self.customSystemUnreadCount = db.unreadCount;
    //: [self refreshSettingBadge];
    [self standard];
}

//: - (void)refreshSessionBadge{
- (void)monthChild{
    //: NSString *badgeValue = self.sessionUnreadCount ? @(self.sessionUnreadCount).stringValue : nil;
    NSString *badgeValue = self.sessionUnreadCount ? @(self.sessionUnreadCount).stringValue : nil;
    //: [super setBadgeValue:badgeValue atIndex:NTESMainTabTypeMessageList];
    [super caseHistory:badgeValue step:NTESMainTabTypeMessageList];
}

//: - (void)refreshContactBadge{
- (void)name{
    // 注释掉的原有代码
    // UINavigationController *nav = self.viewControllers[NTESMainTabTypeContact];
    // NSInteger badge = self.systemUnreadCount;
    // nav.tabBarItem.badgeValue = badge ? @(badge).stringValue : nil;
}

//: - (void)refreshSettingBadge{
- (void)standard{
    //: NSString *badgeValue = self.customSystemUnreadCount ? @(self.customSystemUnreadCount).stringValue : nil;
    NSString *badgeValue = self.customSystemUnreadCount ? @(self.customSystemUnreadCount).stringValue : nil;
    //: [super setBadgeValue:badgeValue atIndex:NTESMainTabTypeSetting];
    [super caseHistory:badgeValue step:NTESMainTabTypeSetting];
}


//: - (UIStatusBarStyle)preferredStatusBarStyle {
- (UIStatusBarStyle)preferredStatusBarStyle {
    //: return UIStatusBarStyleDefault;
    return UIStatusBarStyleDefault;
}


//: #pragma mark - Rotate
#pragma mark - Rotate

//: - (BOOL)shouldAutorotate{
- (BOOL)shouldAutorotate{
    //: BOOL enableRotate = [NTESBundleSetting sharedConfig].enableRotate;
    BOOL enableRotate = [NameLine restoreTing].button;
    //: return enableRotate ? [self.selectedViewController shouldAutorotate] : NO;
    return enableRotate ? [self.selectedViewController shouldAutorotate] : NO;
}

//: - (UIInterfaceOrientationMask)supportedInterfaceOrientations{
- (UIInterfaceOrientationMask)supportedInterfaceOrientations{
    //: BOOL enableRotate = [NTESBundleSetting sharedConfig].enableRotate;
    BOOL enableRotate = [NameLine restoreTing].button;
    //: return enableRotate ? [self.selectedViewController supportedInterfaceOrientations] : UIInterfaceOrientationMaskPortrait;
    return enableRotate ? [self.selectedViewController supportedInterfaceOrientations] : UIInterfaceOrientationMaskPortrait;
}


//: #pragma mark - VC
#pragma mark - VC
//: - (NSDictionary *)vcInfoForTabType:(NTESMainTabType)type{
- (NSDictionary *)on:(NTESMainTabType)type{

    //: if (_configs == nil)
    if (_configs == nil)
    {
        //: _configs = @{
        _configs = @{
                     //: @(NTESMainTabTypeMessageList) : @{
                     @(NTESMainTabTypeMessageList) : @{
                             //: @"vc" : @"NTESSessionListViewController",
                             @"vc" : @"StatusViewController",
                             //: @"title" : [NTESLanguageManager getTextWithKey:@"activity_user_profile_chat"],
                             StringFromMagnitudeoneData(&str_seaValue) : [MaxInformation off:StringFromMagnitudeoneData(&str_pointAttractData)],
                             //: @"image" : @"icon_message_normal",
                             StringFromMagnitudeoneData(&str_attractiveText) : StringFromMagnitudeoneData(&str_wasteContent),
                             //: @"selectedImage": @"icon_message_pressed",
                             StringFromMagnitudeoneData(&str_tingThoughtContent): StringFromMagnitudeoneData(&str_progressIconMinName),
                             //: @"badgeValue": @(self.sessionUnreadCount)
                             StringFromMagnitudeoneData(&str_onlyWithTitle): @(self.sessionUnreadCount)
                             //: },
                             },
                     //: @(NTESMainTabTypeContact) : @{
                     @(NTESMainTabTypeContact) : @{
                             //: @"vc" : @"CCCContactsViewController",
                             @"vc" : @"InformationViewController",
                             //: @"title" : [NTESLanguageManager getTextWithKey:@"contacts_list_title"],
                             StringFromMagnitudeoneData(&str_seaValue) : [MaxInformation off:StringFromMagnitudeoneData(&str_cellCompetitiveValue)],
                             //: @"image" : @"icon_contact_normal",
                             StringFromMagnitudeoneData(&str_attractiveText) : StringFromMagnitudeoneData(&str_tingHareData),
                             //: @"selectedImage": @"icon_contact_pressed",
                             StringFromMagnitudeoneData(&str_tingThoughtContent): StringFromMagnitudeoneData(&str_investigatorValue),
                             //: @"badgeValue": @(self.systemUnreadCount)
                             StringFromMagnitudeoneData(&str_onlyWithTitle): @(self.systemUnreadCount)
                             //: },
                             },
                     //: @(NTESMainTabTypeChatroomList): @{
                     @(NTESMainTabTypeChatroomList): @{
                             //: @"vc" : @"NTESMainCenterViewController",
                             @"vc" : @"DisableIndicatorViewController",
                             //: @"title" : [NTESLanguageManager getTextWithKey:@"main_tab_my"],
                             StringFromMagnitudeoneData(&str_seaValue) : [MaxInformation off:StringFromMagnitudeoneData(&str_tableWithSpeciallyValue)],
                             //: @"image" : @"icon_setting_normal",
                             StringFromMagnitudeoneData(&str_attractiveText) : StringFromMagnitudeoneData(&str_animalCustomPostValue),
                             //: @"selectedImage": @"icon_setting_pressed",
                             StringFromMagnitudeoneData(&str_tingThoughtContent): StringFromMagnitudeoneData(&str_sweetName),
                             //: },
                             },
                     //: @(NTESMainTabTypeSetting) : @{
                     @(NTESMainTabTypeSetting) : @{
                             //: @"vc" : @"NTESVideoListViewController",
                             @"vc" : @"MinViewController",
                             //: @"title" : @"视频".nim_localized,
                             StringFromMagnitudeoneData(&str_seaValue) : @"视频".trapLocalized,
                             //: @"image" : @"icon_setting_normal",
                             StringFromMagnitudeoneData(&str_attractiveText) : StringFromMagnitudeoneData(&str_animalCustomPostValue),
                             //: @"selectedImage": @"icon_setting_pressed",
                             StringFromMagnitudeoneData(&str_tingThoughtContent): StringFromMagnitudeoneData(&str_sweetName),
                             //: @"badgeValue": @(self.customSystemUnreadCount)
                             StringFromMagnitudeoneData(&str_onlyWithTitle): @(self.customSystemUnreadCount)
                             }
                     //: };
                     };

    }
    //: return _configs[@(type)];
    return _configs[@(type)];
}

//: - (void)showTabBar {
- (void)message {
    // 如果已经显示，则不需要重复操作
    //: if (!self.customTabBar.hidden) {
    if (!self.customTabBar.hidden) {
        //: return;
        return;
    }

    // 确保自定义 TabBar 存在
    //: if (!self.customTabBar) {
    if (!self.customTabBar) {
        //: return;
        return;
    }

    // 直接设置可见性
    //: self.customTabBar.hidden = NO;
    self.customTabBar.hidden = NO;
    //: self.customTabBar.alpha = 1.0; 
    self.customTabBar.alpha = 1.0; // 确保透明度为 1

    // 调整容器视图的大小
    //: CGRect containerFrame = self.containerView.frame;
    CGRect containerFrame = self.containerView.frame;
    //: containerFrame.size.height = self.view.bounds.size.height - (IsiPhoneX ? 49 + 35 : 49);
    containerFrame.size.height = self.view.bounds.size.height - (IsiPhoneX ? 49 + 35 : 49);
    //: self.containerView.frame = containerFrame;
    self.containerView.frame = containerFrame;

    // 设置 TabBar 的位置
    //: CGRect tabBarFrame = CGRectMake(0, self.view.bounds.size.height - (IsiPhoneX ? 49 + 35 : 49), self.view.bounds.size.width, (IsiPhoneX ? 49 + 35 : 49));
    CGRect tabBarFrame = CGRectMake(0, self.view.bounds.size.height - (IsiPhoneX ? 49 + 35 : 49), self.view.bounds.size.width, (IsiPhoneX ? 49 + 35 : 49));
    //: self.customTabBar.frame = tabBarFrame;
    self.customTabBar.frame = tabBarFrame;

    // 确保 TabBar 在父视图上
    //: if (!self.customTabBar.superview) {
    if (!self.customTabBar.superview) {
        //: [self.view addSubview:self.customTabBar];
        [self.view addSubview:self.customTabBar];
    }

    // 确保选中的视图控制器的视图大小与容器一致
    //: if (self.selectedViewController) {
    if (self.selectedViewController) {
        //: self.selectedViewController.view.frame = self.containerView.bounds;
        self.selectedViewController.view.frame = self.containerView.bounds;
    }

    // 刷新 TabBar 项
    //: [self.customTabBar refreshTabBarItems];
    [self.customTabBar tab];

    // 强制更新布局
    //: [self.view setNeedsLayout];
    [self.view setNeedsLayout];
    //: [self.view layoutIfNeeded];
    [self.view layoutIfNeeded];

    // 确保 TabBar 在最前面
    //: [self.view bringSubviewToFront:self.customTabBar];
    [self.view bringSubviewToFront:self.customTabBar];
}

//: - (void)hideTabBar {
- (void)text {
    // 如果已经隐藏，则不需要重复操作
    //: if (self.customTabBar.hidden) {
    if (self.customTabBar.hidden) {
        //: return;
        return;
    }

    // 直接设置可见性
    //: self.customTabBar.hidden = YES;
    self.customTabBar.hidden = YES;

    // 调整容器视图的大小
    //: CGRect containerFrame = self.containerView.frame;
    CGRect containerFrame = self.containerView.frame;
    //: containerFrame.size.height = self.view.bounds.size.height;
    containerFrame.size.height = self.view.bounds.size.height;
    //: self.containerView.frame = containerFrame;
    self.containerView.frame = containerFrame;

    // 确保选中的视图控制器的视图大小与容器一致
    //: if (self.selectedViewController) {
    if (self.selectedViewController) {
        //: self.selectedViewController.view.frame = self.containerView.bounds;
        self.selectedViewController.view.frame = self.containerView.bounds;
    }

    // 强制更新布局
    //: [self.view setNeedsLayout];
    [self.view setNeedsLayout];
    //: [self.view layoutIfNeeded];
    [self.view layoutIfNeeded];
}

//: @end
@end

Byte *MagnitudeoneDataToByte(MagnitudeoneData *data) {
    if (data->fileDeveloper) return data->imageAlcohol;
    for (int i = 0; i < data->religionKeyAnimal; i++) {
        data->imageAlcohol[i] ^= data->prod;
    }
    data->imageAlcohol[data->religionKeyAnimal] = 0;
    data->fileDeveloper = true;
	if (data->religionKeyAnimal >= 1) {
		data->damText = data->imageAlcohol[0];
	}
    return data->imageAlcohol;
}

NSString *StringFromMagnitudeoneData(MagnitudeoneData *data) {
    return [NSString stringWithUTF8String:(char *)MagnitudeoneDataToByte(data)];
}
