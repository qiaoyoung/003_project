
#import <Foundation/Foundation.h>

NSString *StringFromEstheticData(Byte *data);        


//: updateMute:
Byte str_eveningHeavyName[] = {66, 11, 56, 10, 107, 245, 44, 149, 129, 14, 61, 56, 44, 41, 60, 45, 21, 61, 60, 45, 2, 62};


//: headerTitle
Byte str_cartTitle[] = {41, 11, 66, 14, 139, 15, 222, 122, 81, 83, 147, 43, 13, 238, 38, 35, 31, 34, 35, 48, 18, 39, 50, 42, 35, 188};


//: 未设置
Byte str_imageGinName[] = {94, 9, 26, 4, 204, 130, 144, 206, 148, 164, 205, 163, 148, 47};


//: 取消管理员
Byte str_cartScanText[] = {88, 15, 20, 8, 184, 153, 113, 60, 209, 123, 130, 210, 162, 116, 211, 154, 141, 211, 124, 114, 209, 125, 132, 152};


//: 设为管理员
Byte str_recordValueText[] = {8, 15, 43, 8, 226, 39, 209, 12, 189, 131, 147, 185, 141, 143, 188, 131, 118, 188, 101, 91, 186, 102, 109, 138};


//: contact_tag_fragment_cancel
Byte str_fractionTitle[] = {68, 27, 52, 7, 8, 22, 141, 47, 59, 58, 64, 45, 47, 64, 43, 64, 45, 51, 43, 50, 62, 45, 51, 57, 49, 58, 64, 43, 47, 45, 58, 47, 49, 56, 173};


//: remove_member
Byte str_perhapsCandidValue[] = {34, 13, 16, 14, 183, 160, 185, 170, 155, 156, 88, 166, 138, 230, 98, 85, 93, 95, 102, 85, 79, 93, 85, 93, 82, 85, 98, 203};


//: Modify_group_nickname
Byte str_yetValue[] = {19, 21, 96, 10, 239, 101, 249, 145, 3, 254, 237, 15, 4, 9, 6, 25, 255, 7, 18, 15, 21, 16, 255, 14, 9, 3, 11, 14, 1, 13, 5, 183};


//: forbidSelect
Byte str_wolfAreaValue[] = {68, 12, 94, 4, 8, 17, 20, 4, 11, 6, 245, 7, 14, 7, 5, 22, 161};


//: detailTitle
Byte str_twoSessionValue[] = {7, 11, 26, 10, 93, 7, 150, 62, 164, 159, 74, 75, 90, 71, 79, 82, 58, 79, 90, 82, 75, 51};


//: disable
Byte str_workingData[] = {91, 7, 48, 8, 45, 211, 203, 201, 52, 57, 67, 49, 50, 60, 53, 119};


//: cellClass
Byte str_moveConcerningValue[] = {57, 9, 51, 8, 110, 199, 39, 124, 48, 50, 57, 57, 16, 57, 46, 64, 64, 78};


//: rowHeight
Byte str_memberValue[] = {28, 9, 91, 13, 62, 147, 6, 233, 1, 26, 117, 45, 199, 23, 20, 28, 237, 10, 14, 12, 13, 25, 193};


//: contact_tag_fragment_sure
Byte str_altogetherData[] = {63, 25, 74, 6, 54, 47, 25, 37, 36, 42, 23, 25, 42, 21, 42, 23, 29, 21, 28, 40, 23, 29, 35, 27, 36, 42, 21, 41, 43, 40, 27, 175};


//: accessory
Byte str_accomplishData[] = {13, 9, 5, 8, 129, 61, 249, 78, 92, 94, 94, 96, 110, 110, 106, 109, 116, 218};


//: 群名片
Byte str_blackValue[] = {84, 9, 52, 11, 114, 49, 28, 80, 198, 42, 242, 179, 138, 112, 177, 92, 89, 179, 85, 83, 230};


//: activity_group_member_info2_inviter
Byte str_refugeeClientTitle[] = {10, 35, 69, 7, 54, 85, 156, 28, 30, 47, 36, 49, 36, 47, 52, 26, 34, 45, 42, 48, 43, 26, 40, 32, 40, 29, 32, 45, 26, 36, 41, 33, 42, 237, 26, 36, 41, 49, 36, 47, 32, 45, 198};


//: userType
Byte str_showLeaderRideData[] = {53, 8, 31, 5, 212, 86, 84, 70, 83, 53, 90, 81, 70, 57};


//: row
Byte str_speciallyMinimumTitle[] = {28, 3, 17, 7, 132, 13, 252, 97, 94, 102, 53};


//: activity_group_info_group_nick
Byte str_showNaturalTypicallyName[] = {72, 30, 40, 8, 228, 185, 79, 101, 57, 59, 76, 65, 78, 65, 76, 81, 55, 63, 74, 71, 77, 72, 55, 65, 70, 62, 71, 55, 63, 74, 71, 77, 72, 55, 70, 65, 59, 67, 59};


//: group_member_info_activity_mute_msg
Byte str_memberContent[] = {5, 35, 12, 10, 220, 237, 112, 56, 151, 19, 91, 102, 99, 105, 100, 83, 97, 89, 97, 86, 89, 102, 83, 93, 98, 90, 99, 83, 85, 87, 104, 93, 106, 93, 104, 109, 83, 97, 105, 104, 89, 83, 97, 103, 91, 194};


//: updateTeamNick
Byte str_arcText[] = {65, 14, 21, 6, 230, 2, 96, 91, 79, 76, 95, 80, 63, 80, 76, 88, 57, 84, 78, 86, 193};


//: footerTitle
Byte str_goalImageText[] = {35, 11, 1, 13, 46, 199, 238, 195, 210, 183, 240, 91, 129, 101, 110, 110, 115, 100, 113, 83, 104, 115, 107, 100, 142};


//: 管理员操作
Byte str_imageIncreasingName[] = {8, 15, 2, 8, 92, 165, 232, 250, 229, 172, 159, 229, 142, 132, 227, 143, 150, 228, 145, 139, 226, 187, 154, 44};


//: activity_group_member_info2_shenfen
Byte str_crediblyData[] = {85, 35, 39, 14, 94, 39, 120, 27, 53, 41, 99, 20, 160, 91, 58, 60, 77, 66, 79, 66, 77, 82, 56, 64, 75, 72, 78, 73, 56, 70, 62, 70, 59, 62, 75, 56, 66, 71, 63, 72, 11, 56, 76, 65, 62, 71, 63, 62, 71, 60};


//: 本地不存在
Byte str_jurorChickenValue[] = {19, 15, 92, 8, 14, 217, 125, 50, 138, 64, 80, 137, 64, 84, 136, 92, 49, 137, 81, 60, 137, 64, 76, 123};


//: action
Byte str_tanTitle[] = {41, 6, 69, 13, 16, 2, 18, 144, 232, 200, 195, 149, 5, 28, 30, 47, 36, 42, 41, 35};


//: user
Byte str_visionName[] = {69, 4, 31, 4, 86, 84, 70, 83, 86};


//: title
Byte str_tianValue[] = {21, 5, 97, 12, 133, 31, 192, 145, 84, 171, 249, 67, 19, 8, 19, 11, 4, 191};


//: disableUserInteraction
Byte str_hearingEdgeTitle[] = {86, 22, 96, 13, 111, 83, 66, 78, 92, 158, 161, 160, 56, 4, 9, 19, 1, 2, 12, 5, 245, 19, 5, 18, 233, 14, 20, 5, 18, 1, 3, 20, 9, 15, 14, 72};


//: extraInfo
Byte str_anotherLeaderValue[] = {55, 9, 22, 12, 245, 186, 75, 150, 112, 169, 236, 186, 79, 98, 94, 92, 75, 51, 88, 80, 89, 158};


//: onKickBtnClick:
Byte str_relateDialogContent[] = {95, 15, 6, 13, 162, 170, 195, 85, 94, 31, 101, 232, 91, 105, 104, 69, 99, 93, 101, 60, 110, 104, 61, 102, 99, 93, 101, 52, 97};


//: updateTeamRole
Byte str_excitedTitle[] = {29, 14, 84, 9, 42, 133, 183, 179, 179, 33, 28, 16, 13, 32, 17, 0, 17, 13, 25, 254, 27, 24, 17, 99};


//: leftEdge
Byte str_arcData[] = {27, 8, 15, 14, 130, 180, 152, 33, 30, 87, 196, 103, 28, 96, 93, 86, 87, 101, 54, 85, 88, 86, 76};

// __DEBUG__
// __CLOSE_PRINT__
//
//  TeamMemberCardViewController.m
//  NIM
//
//  Created by Xuhui on 15/3/19.
//  Copyright (c) 2015年 Netease. All rights reserved.
//

// __M_A_C_R_O__
//: #import "BBBTeamMemberCardViewController.h"
#import "WithTeamViewController.h"
//: #import "UserCommonTableData.h"
#import "UserCommonTableData.h"
//: #import "CCCCommonTableDelegate.h"
#import "StreetwiseDelegate.h"
//: #import "BBBAvatarImageView.h"
#import "AvatarControl.h"
//: #import "BBBTeamCardMemberItem.h"
#import "OnenceShould.h"
//: #import "AAAKitUtil.h"
#import "TypicalCenter.h"
//: #import "UserKitDependency.h"
#import "UserKitDependency.h"
//: #import "AppleProjectKit.h"
#import "Indicator.h"
//: #import "UIViewNimKit.h"
#import "UIViewNimKit.h"
//: #import "CCCKitColorButtonCell.h"
#import "SearchWithViewCell.h"
//: #import "CCCKitSwitcherCell.h"
#import "TinkleViewCell.h"
//: #import "BBBKitInfoFetchOption.h"
#import "TitleOption.h"
//: #import "BBBTeamHelper.h"
#import "LanguageChild.h"

//: @interface BBBTeamMemberCardViewController () <UIActionSheetDelegate>{
@interface WithTeamViewController () <UIActionSheetDelegate>{
    //: UIAlertView *_kickAlertView;
    UIAlertView *_kickAlertView;
    //: UIAlertView *_updateNickAlertView;
    UIAlertView *_updateNickAlertView;
}

//: @property (nonatomic, copy) NSString *memberId;
@property (nonatomic, copy) NSString *memberId;

//: @property (nonatomic, weak) BBBTeamCardMemberItem *member;
@property (nonatomic, weak) OnenceShould *member;

//: @property (nonatomic, weak) BBBTeamCardMemberItem *viewer;
@property (nonatomic, weak) OnenceShould *viewer;

//: @property (strong, nonatomic) UITableView *tableView;
@property (strong, nonatomic) UITableView *tableView;

//: @property (nonatomic,strong) CCCCommonTableDelegate *delegator;
@property (nonatomic,strong) StreetwiseDelegate *delegator;

//: @property (nonatomic,weak) id <CCCTeamMemberListDataSource> dataSource;
@property (nonatomic,weak) id <MessageSource> dataSource;

//: @property (nonatomic,strong) NSArray *data;
@property (nonatomic,strong) NSArray *data;

//: @end
@end

//: @implementation BBBTeamMemberCardViewController
@implementation WithTeamViewController

//: - (void)dealloc {
- (void)dealloc {
    //: [[NSNotificationCenter defaultCenter] removeObserver:self];
    [[NSNotificationCenter defaultCenter] removeObserver:self];
}

//: - (instancetype)initWithMember:(NSString *)userId
- (instancetype)initWithChange:(NSString *)userId
                    //: dataSource:(id <CCCTeamMemberListDataSource>) dataSource {
                    keyOriginSource:(id <MessageSource>) dataSource {
    //: if (self = [super init]) {
    if (self = [super init]) {
        //: _memberId = userId;
        _memberId = userId;
        //: _dataSource = dataSource;
        _dataSource = dataSource;
        //: extern NSString *kNIMTeamListDataTeamMembersChanged;
        extern NSString *k_showName;
        //: [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(teamMemberUpdate:) name:kNIMTeamListDataTeamMembersChanged object:nil];
        [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(commentsed:) name:k_showName object:nil];
    }
    //: return self;
    return self;
}

//: - (void)viewDidLoad {
- (void)viewDidLoad {
    //: [super viewDidLoad];
    [super viewDidLoad];
    //: self.navigationItem.title = @"群名片".nim_localized;
    self.navigationItem.title = StringFromEstheticData(str_blackValue).trapLocalized;
    //: [self.view addSubview:self.tableView];
    [self.view addSubview:self.tableView];

    //: [self refreshData];
    [self accountingData];
    //: __weak typeof(self) wself = self;
    __weak typeof(self) wself = self;
    //: self.delegator = [[CCCCommonTableDelegate alloc] initWithTableData:^NSArray *{
    self.delegator = [[StreetwiseDelegate alloc] initWithBubbleData:^NSArray *{
        //: return wself.data;
        return wself.data;
    //: }];
    }];
    //: self.tableView.delegate = self.delegator;
    self.tableView.delegate = self.delegator;
    //: self.tableView.dataSource = self.delegator;
    self.tableView.dataSource = self.delegator;
}

//: - (NSArray *)buildData{
- (NSArray *)chromatic{
    //: BBBKitInfoFetchOption *option = [[BBBKitInfoFetchOption alloc] init];
    TitleOption *option = [[TitleOption alloc] init];
    option.session = _dataSource.session;
    //: CCCKitInfo *usrInfo = [[AppleProjectKit sharedKit] infoByUser:_member.userId option:option];
    TitleInfo *usrInfo = [[Indicator reach] indoors:_member.userId harvest:option];
    //: NSDictionary *headerItem = @{
    NSDictionary *headerItem = @{
                                 //: @"cellClass" : @"BBBTeamMemberCardHeaderCell",
                                 StringFromEstheticData(str_moveConcerningValue) : @"CardView",
                                 //: @"rowHeight" : @(222),
                                 StringFromEstheticData(str_memberValue) : @(222),
                                 //: @"extraInfo" : @{@"user":usrInfo, @"userType":@(_member.userType)},
                                 StringFromEstheticData(str_anotherLeaderValue) : @{StringFromEstheticData(str_visionName):usrInfo, StringFromEstheticData(str_showLeaderRideData):@(_member.userType)},
                                 //: @"leftEdge" : @(15)
                                 StringFromEstheticData(str_arcData) : @(15)
                                 //: };
                                 };
    //: NSDictionary *nickItem = @{
    NSDictionary *nickItem = @{
                               //: @"title" : [NTESLanguageManager getTextWithKey:@"activity_group_info_group_nick"],
                               StringFromEstheticData(str_tianValue) : [MaxInformation off:StringFromEstheticData(str_showNaturalTypicallyName)],
                               //: @"detailTitle" : (usrInfo.showName ?: [NTESLanguageManager getTextWithKey:@"未设置"]),
                               StringFromEstheticData(str_twoSessionValue) : (usrInfo.showName ?: [MaxInformation off:StringFromEstheticData(str_imageGinName)]),
                               //: @"action" : ([self isSelf] || [self canUpdateTeamMember])? @"updateTeamNick" : @"",
                               StringFromEstheticData(str_tanTitle) : ([self messageImage] || [self color])? StringFromEstheticData(str_arcText) : @"",
                               //: @"accessory" : ([self isSelf] || [self canUpdateTeamMember])? @(YES) : @(NO),
                               StringFromEstheticData(str_accomplishData) : ([self messageImage] || [self color])? @(YES) : @(NO),
                               //: @"rowHeight" : @(50),
                               StringFromEstheticData(str_memberValue) : @(50),
                               //: @"leftEdge" : @(15),
                               StringFromEstheticData(str_arcData) : @(15),
                               //: };
                               };

    //: NSDictionary *userTypeItem = @{
    NSDictionary *userTypeItem = @{
                                   //: @"title" : [NTESLanguageManager getTextWithKey:@"activity_group_member_info2_shenfen"],//@"身份".nim_localized,
                                   StringFromEstheticData(str_tianValue) : [MaxInformation off:StringFromEstheticData(str_crediblyData)],//@"身份".nim_localized,
                                   //: @"detailTitle" : [BBBTeamHelper memberTypeText:self.member.userType],
                                   StringFromEstheticData(str_twoSessionValue) : [LanguageChild futurism:self.member.userType],
                                   //: @"action" : ([self isOwner] && ![self isSelf])? @"updateTeamRole" : @"",
                                   StringFromEstheticData(str_tanTitle) : ([self path] && ![self messageImage])? StringFromEstheticData(str_excitedTitle) : @"",
                                   //: @"accessory" : @([self canChangeUserType]),
                                   StringFromEstheticData(str_accomplishData) : @([self option]),
                                   //: @"rowHeight" : @(50),
                                   StringFromEstheticData(str_memberValue) : @(50),
                                   //: @"leftEdge" : @(15),
                                   StringFromEstheticData(str_arcData) : @(15),
                                   //: };
                                   };

    //: NSDictionary *inviterAccidItem = @{
    NSDictionary *inviterAccidItem = @{
                                       //: @"title" : [NTESLanguageManager getTextWithKey:@"activity_group_member_info2_inviter"],//@"邀请人".nim_localized,
                                       StringFromEstheticData(str_tianValue) : [MaxInformation off:StringFromEstheticData(str_refugeeClientTitle)],//@"邀请人".nim_localized,
                                       //: @"detailTitle" : _member.inviterAccid ? (_member.inviterAccid.length ? _member.inviterAccid : _member.userId) : @"本地不存在".nim_localized,
                                       StringFromEstheticData(str_twoSessionValue) : _member.inviterAccid ? (_member.inviterAccid.length ? _member.inviterAccid : _member.userId) : StringFromEstheticData(str_jurorChickenValue).trapLocalized,
                                       //: @"action" : @"",
                                       StringFromEstheticData(str_tanTitle) : @"",
                                       //: @"accessory" : [self isOwner] && ![self isSelf]? @(YES) : @(NO),
                                       StringFromEstheticData(str_accomplishData) : [self path] && ![self messageImage]? @(YES) : @(NO),
                                       //: @"rowHeight" : @(50),
                                       StringFromEstheticData(str_memberValue) : @(50),
                                       //: @"leftEdge" : @(15),
                                       StringFromEstheticData(str_arcData) : @(15),
                                       //: };
                                       };

    //: NSDictionary *isMuteItem = @{
    NSDictionary *isMuteItem = @{
                                  //: @"title" : [NTESLanguageManager getTextWithKey:@"group_member_info_activity_mute_msg"],//@"设置禁言".nim_localized,
                                  StringFromEstheticData(str_tianValue) : [MaxInformation off:StringFromEstheticData(str_memberContent)],//@"设置禁言".nim_localized,
                                  //: @"cellClass" : @"CCCKitSwitcherCell",
                                  StringFromEstheticData(str_moveConcerningValue) : @"TinkleViewCell",
                                  //: @"action" : @"updateMute:",
                                  StringFromEstheticData(str_tanTitle) : StringFromEstheticData(str_eveningHeavyName),
                                  //: @"forbidSelect" : @(YES),
                                  StringFromEstheticData(str_wolfAreaValue) : @(YES),
                                  //: @"rowHeight" : @(50),
                                  StringFromEstheticData(str_memberValue) : @(50),
                                  //: @"disableUserInteraction":@(![self canUpdateTeamMember]),
                                  StringFromEstheticData(str_hearingEdgeTitle):@(![self color]),
                                  //: @"extraInfo" : @(_member.isMuted),
                                  StringFromEstheticData(str_anotherLeaderValue) : @(_member.isMuted),
                                  //: @"leftEdge" : @(15),
                                  StringFromEstheticData(str_arcData) : @(15),
                                  //: };
                                  };

    //: NSDictionary *kickItem = @{
    NSDictionary *kickItem = @{
                               //: @"title" : @"remove_member",//@"移出本群".nim_localized,
                               StringFromEstheticData(str_tianValue) : StringFromEstheticData(str_perhapsCandidValue),//@"移出本群".nim_localized,
                               //: @"cellClass" : @"CCCKitColorButtonCell",
                               StringFromEstheticData(str_moveConcerningValue) : @"SearchWithViewCell",
                               //: @"action" : @"onKickBtnClick:",
                               StringFromEstheticData(str_tanTitle) : StringFromEstheticData(str_relateDialogContent),
                               //: @"extraInfo" : @(CCCKitColorButtonCellStyleRed),
                               StringFromEstheticData(str_anotherLeaderValue) : @(CCCKitColorButtonCellStyleRed),
                               //: @"rowHeight" : @(70),
                               StringFromEstheticData(str_memberValue) : @(70),
                               //: @"disable" : @([self isSelf] || ![self canKickTeamMember]),
                               StringFromEstheticData(str_workingData) : @([self messageImage] || ![self impelMain]),
                               //: @"leftEdge" : @(0),
                               StringFromEstheticData(str_arcData) : @(0),
                               //: };
                               };

    //: NSArray *rowContent = nil;
    NSArray *rowContent = nil;
    //: if (_member.teamType == NIMTeamTypeSuper) {
    if (_member.teamType == NIMTeamTypeSuper) {
        //: rowContent = @[headerItem, nickItem, userTypeItem, isMuteItem, kickItem];
        rowContent = @[headerItem, nickItem, userTypeItem, isMuteItem, kickItem];
    //: } else {
    } else {
        //: rowContent = @[headerItem, nickItem, userTypeItem, inviterAccidItem, isMuteItem, kickItem];
        rowContent = @[headerItem, nickItem, userTypeItem, inviterAccidItem, isMuteItem, kickItem];
    }

    //: NSArray *data = @[
    NSArray *data = @[
                      //: @{
                      @{
                          //: @"headerTitle":@"",
                          StringFromEstheticData(str_cartTitle):@"",
                          //: @"row" :rowContent,
                          StringFromEstheticData(str_speciallyMinimumTitle) :rowContent,
                          //: @"footerTitle":@""
                          StringFromEstheticData(str_goalImageText):@""
                          //: },
                          },
                       //: ];
                       ];
    //: return [NIMCommonTableSection sectionsWithData:data];
    return [ImageSection max:data];
}

//: - (void)refreshData{
- (void)accountingData{
    //: _viewer = _dataSource.myCard;
    _viewer = _dataSource.visible;
    //: _member = [_dataSource memberWithUserId:_memberId];
    _member = [_dataSource lyric:_memberId];
    //: self.data = [self buildData];
    self.data = [self chromatic];
    //: [self.tableView reloadData];
    [self.tableView reloadData];
}

//: - (void)onKickBtnClick:(id)sender {
- (void)scaleBeTeam:(id)sender {
    //: _kickAlertView = [[UIAlertView alloc] initWithTitle:@""
    _kickAlertView = [[UIAlertView alloc] initWithTitle:@""
                                                //: message:[NTESLanguageManager getTextWithKey:@"remove_member"]//@"移出本群".nim_localized
                                                message:[MaxInformation off:StringFromEstheticData(str_perhapsCandidValue)]//@"移出本群".nim_localized
                                               //: delegate:self
                                               delegate:self
                                      //: cancelButtonTitle:[NTESLanguageManager getTextWithKey:@"contact_tag_fragment_cancel"]
                                      cancelButtonTitle:[MaxInformation off:StringFromEstheticData(str_fractionTitle)]
                                      //: otherButtonTitles:[NTESLanguageManager getTextWithKey:@"contact_tag_fragment_sure"], nil];
                                      otherButtonTitles:[MaxInformation off:StringFromEstheticData(str_altogetherData)], nil];
    //: [_kickAlertView show];
    [_kickAlertView show];
}

//: - (void)updateTeamNick
- (void)secondName
{
    //: _updateNickAlertView = [[UIAlertView alloc] initWithTitle:@""
    _updateNickAlertView = [[UIAlertView alloc] initWithTitle:@""
                                                      //: message:[NTESLanguageManager getTextWithKey:@"Modify_group_nickname"]//@"修改群昵称".nim_localized
                                                      message:[MaxInformation off:StringFromEstheticData(str_yetValue)]//@"修改群昵称".nim_localized
                                                     //: delegate:self
                                                     delegate:self
                                            //: cancelButtonTitle:[NTESLanguageManager getTextWithKey:@"contact_tag_fragment_cancel"]
                                            cancelButtonTitle:[MaxInformation off:StringFromEstheticData(str_fractionTitle)]
                                            //: otherButtonTitles:[NTESLanguageManager getTextWithKey:@"contact_tag_fragment_sure"], nil];
                                            otherButtonTitles:[MaxInformation off:StringFromEstheticData(str_altogetherData)], nil];
    //: _updateNickAlertView.alertViewStyle = UIAlertViewStylePlainTextInput;
    _updateNickAlertView.alertViewStyle = UIAlertViewStylePlainTextInput;
    //: [_updateNickAlertView show];
    [_updateNickAlertView show];
}

//: - (void)updateTeamRole
- (void)link
{
    //: if (![self canChangeUserType]) {
    if (![self option]) {
        //: return;
        return;
    }
    //: UIActionSheet *sheet = [[UIActionSheet alloc] initWithTitle:[NTESLanguageManager getTextWithKey:@"管理员操作"]
    UIActionSheet *sheet = [[UIActionSheet alloc] initWithTitle:[MaxInformation off:StringFromEstheticData(str_imageIncreasingName)]
                                                       //: delegate:self
                                                       delegate:self
                                              //: cancelButtonTitle:[NTESLanguageManager getTextWithKey:@"contact_tag_fragment_cancel"]
                                              cancelButtonTitle:[MaxInformation off:StringFromEstheticData(str_fractionTitle)]
                                         //: destructiveButtonTitle:nil
                                         destructiveButtonTitle:nil
                                              //: otherButtonTitles: self.member.userType == NIMTeamMemberTypeManager ? [NTESLanguageManager getTextWithKey:@"取消管理员"] : [NTESLanguageManager getTextWithKey:@"设为管理员"], nil];
                                              otherButtonTitles: self.member.userType == NIMTeamMemberTypeManager ? [MaxInformation off:StringFromEstheticData(str_cartScanText)] : [MaxInformation off:StringFromEstheticData(str_recordValueText)], nil];
    //: [sheet showInView:self.view];
    [sheet showInView:self.view];
}

//: - (void)updateMute:(UISwitch *)switcher {
- (void)size:(UISwitch *)switcher {
    //: NSString *userId = self.member.userId;
    NSString *userId = self.member.userId;
    //: BOOL mute = switcher.on;
    BOOL mute = switcher.on;
    //: __block typeof(self) wself = self;
    __block typeof(self) wself = self;
    //: [_dataSource updateUserMuteState:userId mute:mute completion:^(NSError * _Nonnull error, NSString * _Nonnull msg) {
    [_dataSource title:userId requisite:mute info:^(NSError * _Nonnull error, NSString * _Nonnull msg) {
        //: [wself showToastMsg:msg];
        [wself by:msg];
        //: if (error) {
        if (error) {
            //: switcher.on = !mute;
            switcher.on = !mute;
        }
        //: if (wself.delegate && [wself.delegate respondsToSelector:@selector(onTeamMemberMuted:mute:)]) {
        if (wself.delegate && [wself.delegate respondsToSelector:@selector(bar:cellMute:)]) {
            //: [wself.delegate onTeamMemberMuted:wself.member mute:mute];
            [wself.delegate bar:wself.member cellMute:mute];
        }
    //: }];
    }];
}

//: - (void)removeManager:(NSString *)memberId{
- (void)light:(NSString *)memberId{
    //: NSString *userId = self.member.userId;
    NSString *userId = self.member.userId;
    //: __block typeof(self) wself = self;
    __block typeof(self) wself = self;
    //: [_dataSource removeManagers:@[userId] completion:^(NSError * _Nonnull error, NSString * _Nonnull msg) {
    [_dataSource showDecarburise:@[userId] convert:^(NSError * _Nonnull error, NSString * _Nonnull msg) {
        //: [wself showToastMsg:msg];
        [wself by:msg];
    //: }];
    }];
}

//: - (void)addManager:(NSString *)memberId{
- (void)display:(NSString *)memberId{
    //: if (!memberId) {
    if (!memberId) {
        //: return;
        return;
    }
    //: __block typeof(self) wself = self;
    __block typeof(self) wself = self;
    //: [_dataSource addManagers:@[memberId] completion:^(NSError * _Nonnull error, NSString * _Nonnull msg) {
    [_dataSource file:@[memberId] milk:^(NSError * _Nonnull error, NSString * _Nonnull msg) {
        //: [wself showToastMsg:msg];
        [wself by:msg];
    //: }];
    }];
}

//: - (void)teamMemberUpdate:(NSNotification *)note {
- (void)commentsed:(NSNotification *)note {
    //: [self refreshData];
    [self accountingData];
}

//: #pragma mark - UIAlertViewDelegate
#pragma mark - UIAlertViewDelegate
- (void)alertView:(UIAlertView *)alertView didDismissWithButtonIndex:(NSInteger)buttonIndex{
    //: if (alertView == _kickAlertView) {
    if (alertView == _kickAlertView) {
        //: if(alertView.cancelButtonIndex != buttonIndex) {
        if(alertView.cancelButtonIndex != buttonIndex) {
            //: NSString *userId = self.member.userId;
            NSString *userId = self.member.userId;
            //: __weak typeof(self) weakSelf = self;
            __weak typeof(self) weakSelf = self;
            //: [_dataSource kickUsers:@[userId] completion:^(NSError * _Nonnull error, NSString * _Nonnull msg) {
            [_dataSource say:@[userId] messageSearch:^(NSError * _Nonnull error, NSString * _Nonnull msg) {
                //: [weakSelf showToastMsg:msg];
                [weakSelf by:msg];
                //: if (!error) {
                if (!error) {
                    //: [weakSelf.navigationController popViewControllerAnimated:NO];
                    [weakSelf.navigationController popViewControllerAnimated:NO];
                    //: if([weakSelf.delegate respondsToSelector:@selector(onTeamMemberKicked:)]) {
                    if([weakSelf.delegate respondsToSelector:@selector(sizes:)]) {
                        //: [weakSelf.delegate onTeamMemberKicked:weakSelf.member];
                        [weakSelf.delegate sizes:weakSelf.member];
                    }
                }
            //: }];
            }];
        }
    }
    //: if (alertView == _updateNickAlertView) {
    if (alertView == _updateNickAlertView) {
        //: switch (buttonIndex) {
        switch (buttonIndex) {
            //: case 0:
            case 0://取消
                //: break;
                break;
            //: case 1:{
            case 1:{
                //: NSString *name = [alertView textFieldAtIndex:0].text;
                NSString *name = [alertView textFieldAtIndex:0].text;
                //: NSString *userId = self.member.userId;
                NSString *userId = self.member.userId;
                //: __weak typeof(self) weakSelf = self;
                __weak typeof(self) weakSelf = self;
                //: [_dataSource updateUserNick:userId nick:name completion:^(NSError * _Nonnull error, NSString * _Nonnull msg) {
                [_dataSource layerNickCompletion:userId speckless:name call:^(NSError * _Nonnull error, NSString * _Nonnull msg) {
                    //: [weakSelf showToastMsg:msg];
                    [weakSelf by:msg];
                //: }];
                }];
                //: break;
                break;
            }
            //: default:
            default:
                //: break;
                break;
        }
    }
}

//: #pragma mark - UIActionSheetDelegate
#pragma mark - UIActionSheetDelegate
- (void)actionSheet:(UIActionSheet *)actionSheet didDismissWithButtonIndex:(NSInteger)buttonIndex{
    //: if(buttonIndex == 0) {
    if(buttonIndex == 0) {
        //: NSString *userId = self.member.userId;
        NSString *userId = self.member.userId;
        //: NIMTeamMemberType userType = self.member.userType;
        NIMTeamMemberType userType = self.member.userType;
        //: if (userType == NIMTeamMemberTypeManager) {
        if (userType == NIMTeamMemberTypeManager) {
            //: [self removeManager:userId];
            [self light:userId];
        //: }else{
        }else{
            //: [self addManager:userId];
            [self display:userId];
        }
    }
}

//: #pragma mark - Private
#pragma mark - Private
//: - (BOOL)isSelf {
- (BOOL)messageImage {
    //: return [self.viewer.userId isEqualToString:self.member.userId];
    return [self.viewer.userId isEqualToString:self.member.userId];
}

//: - (BOOL)isOwner {
- (BOOL)path {
    //: return self.viewer.userType == NIMTeamMemberTypeOwner;
    return self.viewer.userType == NIMTeamMemberTypeOwner;
}

//: - (BOOL)canUpdateTeamMember {
- (BOOL)color {
    //: BOOL ret = NO;
    BOOL ret = NO;
    //: BOOL viewerIsOwner = [self isOwner];
    BOOL viewerIsOwner = [self path];
    //: BOOL viewerIsManager = self.viewer.userType == NIMTeamMemberTypeManager;
    BOOL viewerIsManager = self.viewer.userType == NIMTeamMemberTypeManager;
    //: BOOL memberIsNormal = self.member.userType == NIMTeamMemberTypeNormal;
    BOOL memberIsNormal = self.member.userType == NIMTeamMemberTypeNormal;
    //: if (viewerIsOwner) {
    if (viewerIsOwner) {
        //: ret = ![self isSelf];
        ret = ![self messageImage];
    //: } else if (viewerIsManager) {
    } else if (viewerIsManager) {
        //: ret = memberIsNormal;
        ret = memberIsNormal;
    }
    //: return ret;
    return ret;
}

//: - (BOOL)canChangeUserType {
- (BOOL)option {
    //: BOOL ret = ([self isOwner] && ![self isSelf]);
    BOOL ret = ([self path] && ![self messageImage]);
    //: return ret;
    return ret;
}

//: - (BOOL)canKickTeamMember {
- (BOOL)impelMain {
    //: BOOL ret = [self canUpdateTeamMember];
    BOOL ret = [self color];
    //: return ret;
    return ret;
}

//: - (void)showToastMsg:(NSString *)msg {
- (void)by:(NSString *)msg {
    //: if (msg) {
    if (msg) {
        //: [self.view makeToast:msg
        [self.view makeToast:msg
                    //: duration:2.0
                    duration:2.0
                    //: position:CSToastPositionCenter];
                    position:CSToastPositionCenter];
    }
}

//: #pragma mark - Getter
#pragma mark - Getter
//: - (UITableView *)tableView {
- (UITableView *)tableView {
    //: if (!_tableView) {
    if (!_tableView) {
        //: _tableView = [[UITableView alloc] initWithFrame:self.view.bounds style:UITableViewStylePlain];
        _tableView = [[UITableView alloc] initWithFrame:self.view.bounds style:UITableViewStylePlain];
        //: _tableView.autoresizingMask = UIViewAutoresizingFlexibleHeight | UIViewAutoresizingFlexibleWidth;
        _tableView.autoresizingMask = UIViewAutoresizingFlexibleHeight | UIViewAutoresizingFlexibleWidth;
        //: _tableView.separatorStyle = UITableViewCellSeparatorStyleNone;
        _tableView.separatorStyle = UITableViewCellSeparatorStyleNone;
        //: _tableView.tableFooterView = [UIView new];
        _tableView.tableFooterView = [UIView new];
    }
    //: return _tableView;
    return _tableView;
}

//: @end
@end

Byte * EstheticDataToCache(Byte *data) {
    int authorityInsect = data[0];
    int different = data[1];
    Byte relaxImage = data[2];
    int bandAura = data[3];
    if (!authorityInsect) return data + bandAura;
    for (int i = bandAura; i < bandAura + different; i++) {
        int value = data[i] + relaxImage;
        if (value > 255) {
            value -= 256;
        }
        data[i] = value;
    }
    data[0] = 0;
    data[bandAura + different] = 0;
    return data + bandAura;
}

NSString *StringFromEstheticData(Byte *data) {
    return [NSString stringWithUTF8String:(char *)EstheticDataToCache(data)];
}
